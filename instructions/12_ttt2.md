# TaxonTableTools2 (TTT2) — Merging APSCALE Read and Taxonomy Tables

This guide explains how to use TaxonTableTools2 (TTT2) to merge APSCALE read tables and taxonomy tables for downstream analyses (e.g., input to microDecon for decontamination).

---

## What is TaxonTableTools2?

TaxonTableTools2 (TTT2) provides an easy-to-use, GUI-based platform for biologists and non-bioinformaticians to analyze and visualize DNA metabarcoding data.  
Version 2 uses **Streamlit** for its graphical interface, replacing the previous PySimpleGUI version.

TTT2 allows you to:
- Merge read and taxonomy tables from APSCALE/APSCALE-BLAST
- Explore, visualize, and process DNA metabarcoding data
- Export merged tables for further analysis (e.g., with microDecon)

---

## Requirements

- **Miniconda/Anaconda** for environment management
- Install the TTT2 conda environment (download the appropriate `.yml` file for your OS)
- Activate the environment:
  ```bash
  conda activate TTT
  ```
- Install or update TaxonTableTools2:
  ```bash
  pip install --upgrade taxontabletools2
  ```
- For full installation instructions, visit the [TaxonTableTools2 GitHub repository](https://github.com/TillMacher/TaxonTableTools2).

---

## How to Merge APSCALE Read and Taxonomy Tables

1. **Launch TaxonTableTools2**

   Activate the TTT environment, and run:
   ```bash
   taxontabletools2
   ```

2. **Create or Select a Project**

   - At the start window, select your projects folder or create a new project.
   - Click "Start" to launch the main GUI in your browser.

3. **Merge Read and Taxonomy Tables**

   - In the sidebar of the GUI in the browser, click **"Create Taxon Table"**
   - You will be prompted to upload your **APSCALE read table** and **taxonomy table**:
     - Drag and drop or browse to select your files.
     - Set both formats to "APSCALE".
     - Optionally, choose to merge genus/species columns.
   - Give your merged table a name.

   - The merged table will be saved in the `TaXon_tables` directory within your TTT2 project folders.

5. **Optionally: Load and Use Your Taxon Table**

   - Select and load the merged taxon table in the GUI.
   - Explore summary statistics, visualizations, and downstream analyses using the sidebar modules.

---

## Next Step

Open [`13_microdecon_apscale.Rmd`](13_microdecon_apscale.Rmd) and run the script to perform decontamination with microDecon.

---

## References

- Macher, T.H., Beermann, A. J., & Leese, F. (2021). TaxonTableTools—A comprehensive, platform-independent graphical user interface software to explore and visualise DNA metabarcoding data. *Molecular Ecology Resources*. https://doi.org/10.1111/1755-0998.13358
- [TaxonTableTools2 GitHub repository](https://github.com/TillMacher/TaxonTableTools2)

---